@model Car
@using CarRental.Utilities;
@{
    // List<Car> productFeatured = ViewBag.productFeatured;
    List<Car> productRelated = ViewBag.productRelated;
    List<CarReview> productReviews = ViewBag.productRviews;
}
@section style {
    <style>
        /* Căn chỉnh form-group */
        .form-group {
            margin-bottom: 20px;
            position: relative;
        }

        /* Điều chỉnh giao diện của ô nhập ngày */
        input[type="date"] {
            position: relative;
            padding-right: 40px; /* Thêm khoảng trống để tránh biểu tượng */
            height: 45px;
            border-radius: 8px;
            border: 1px solid #ccc;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
        }

            /* Điều chỉnh biểu tượng cuốn lịch */
            input[type="date"]::-webkit-calendar-picker-indicator {
                position: absolute;
                right: 10px; /* Đẩy biểu tượng ra xa mép phải */
                top: 50%; /* Căn giữa theo chiều dọc */
                transform: translateY(-50%);
                cursor: pointer;
                color: #555; /* Màu của biểu tượng */
            }

            /* Thay đổi border khi hover */
            input[type="date"]:hover {
                border-color: #007bff;
            }

            /* Hiệu ứng khi focus */
            input[type="date"]:focus {
                border-color: #007bff;
                box-shadow: 0px 0px 5px rgba(0, 123, 255, 0.5);
                outline: none;
            }

            /* Biểu tượng lịch */
            input[type="date"]::-webkit-calendar-picker-indicator {
                position: absolute;
                right: 10px;
                top: 50%;
                transform: translateY(-50%);
                cursor: pointer;
            }

        /* Tùy chỉnh nhãn */
        label {
            font-weight: bold;
            font-size: 14px;
            margin-bottom: 5px;
            display: block;
            color: #555;
        }
    </style>
}

<!-- Breadcrumb Area Start Here -->
<div class="breadcrumbs-area position-relative">
    <div class="container">
        <div class="row">
            <div class="col-12 text-center">
                <div class="breadcrumb-content position-relative section-content">
                    <h3 class="title-3" style="color:aliceblue ">Product Details</h3>
                    <ul style="color:aliceblue ">
                        <li><a href="index.html" style="color:aliceblue ">Home</a></li>
                        <li style="color:aliceblue ">Product Details</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Breadcrumb Area End Here -->
<!-- Single Product Main Area Start -->
<div class="single-product-main-area">
    <div class="container container-default custom-area">
        <div class="row">
            <div class="col-lg-5 offset-lg-0 col-md-8 offset-md-2 col-custom">
                <div class="product-details-img">
                    <div class="single-product-img swiper-container gallery-top popup-gallery">
                        <div class="swiper-wrapper">
                            <div class="swiper-slide">
                                <a class="w-100" href="@Model.Image">
                                    <img class="w-100" src="@Model.Image" alt="Product">
                                </a>
                            </div>
                            <div class="swiper-slide">
                                <a class="w-100" href="@Model.Image">
                                    <img class="w-100" src="@Model.Image" alt="Product">
                                </a>
                            </div>
                            <div class="swiper-slide">
                                <a class="w-100" href="@Model.Image">
                                    <img class="w-100" src="@Model.Image" alt="Product">
                                </a>
                            </div>
                            <div class="swiper-slide">
                                <a class="w-100" href="@Model.Image">
                                    <img class="w-100" src="@Model.Image" alt="Product">
                                </a>
                            </div>
                            <div class="swiper-slide">
                                <a class="w-100" href="@Model.Image">
                                    <img class="w-100" src="@Model.Image" alt="Product">
                                </a>
                            </div>
                            <div class="swiper-slide">
                                <a class="w-100" href="@Model.Image">
                                    <img class="w-100" src="@Model.Image" alt="Product">
                                </a>
                            </div>
                        </div>
                    </div>
                    <div class="single-product-thumb swiper-container gallery-thumbs">
                        <div class="swiper-wrapper">
                            <div class="swiper-slide">
                                <img src="assets/images/product/small-size/1.jpg" alt="Product">
                            </div>
                            <div class="swiper-slide">
                                <img src="assets/images/product/small-size/2.jpg" alt="Product">
                            </div>
                            <div class="swiper-slide">
                                <img src="assets/images/product/small-size/3.jpg" alt="Product">
                            </div>
                            <div class="swiper-slide">
                                <img src="assets/images/product/small-size/4.jpg" alt="Product">
                            </div>
                            <div class="swiper-slide">
                                <img src="assets/images/product/small-size/5.jpg" alt="Product">
                            </div>
                            <div class="swiper-slide">
                                <img src="assets/images/product/small-size/6.jpg" alt="Product">
                            </div>
                        </div>
                        <!-- Add Arrows -->
                        <div class="swiper-button-next swiper-button-white"><i class="lnr lnr-arrow-right"></i></div>
                        <div class="swiper-button-prev swiper-button-white"><i class="lnr lnr-arrow-left"></i></div>
                    </div>
                </div>
            </div>
            <div class="col-lg-7 col-custom">
                <div class="product-summery position-relative">
                    <div class="product-head mb-3">
                        <h2 class="product-title">@Model.CarName</h2>
                    </div>
                    <div class="price-box mb-2">
                        <span class="regular-price">@Model.SalePrice.Value.ToString("N0")đ/ngày</span>
                        <span class="old-price"><del>@Model.Price.Value.ToString("N0")đ</del></span>
                    </div>
                    <div class="product-rating mb-3">
                        <i class="fa fa-star"></i>
                        <i class="fa fa-star"></i>
                        <i class="fa fa-star"></i>
                        <i class="fa fa-star-o"></i>
                        <i class="fa fa-star-o"></i>
                    </div>
                    <div class="sku mb-3">
                        <span>SKU: 12345</span>
                    </div>
                    <p class="desc-content mb-5">Vị trí : @Model.Descriptions</p>
                    <form asp-action="AddToCart" asp-controller="Cart" asp-route-id="@Model.CarId">
                        <!-- Hàng chứa quantity và ngày tháng -->
                        <div class="row align-items-center mb-3">
                            <!-- Quantity -->
                            <div class="col-md-3">
                                <div class="quantity">
                                    <div class="cart-plus-minus">
                                        <input class="cart-plus-minus-box" value="1" type="text" name="quantity">
                                        <div class="dec qtybutton">-</div>
                                        <div class="inc qtybutton">+</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Ngày nhận xe -->
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label for="pickupDate">Ngày nhận xe:</label>
                                    <input id="pickupDate" name="pickupDate" type="date" class="form-control" required>

                                </div>
                            </div>

                            <!-- Ngày trả xe -->
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label for="returnDate">Ngày trả xe:</label>
                                    <input id="returnDate" name="returnDate" type="date" class="form-control" required>
                                 
                                </div>
                            </div>
                            <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
                            <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
                            <script>
                                $(document).ready(function () {
                                    // Lấy ngày hiện tại
                                    const today = new Date();

                                    // Chuyển đổi ngày hiện tại thành định dạng yyyy-mm-dd
                                    const day = String(today.getDate()).padStart(2, '0');
                                    const month = String(today.getMonth() + 1).padStart(2, '0'); // Tháng bắt đầu từ 0
                                    const year = today.getFullYear();
                                    const currentDate = `${year}-${month}-${day}`;

                                    // Áp dụng ngày hiện tại vào thuộc tính 'min' của các input
                                    $('#pickupDate').attr('min', currentDate);
                                    $('#returnDate').attr('min', currentDate);

                                    // Lắng nghe sự kiện thay đổi trên trường Ngày trả xe
                                    $('#returnDate, #pickupDate').on('input', function () {
                                        const pickupDate = new Date($('#pickupDate').val());
                                        const returnDate = new Date($('#returnDate').val());

                                        // Lấy ngày mà không có giờ (chỉ lấy phần năm, tháng, ngày)
                                        const pickupDateOnly = new Date(pickupDate.getFullYear(), pickupDate.getMonth(), pickupDate.getDate());
                                        const returnDateOnly = new Date(returnDate.getFullYear(), returnDate.getMonth(), returnDate.getDate());

                                        // Kiểm tra nếu ngày trả không hợp lệ
                                        if (returnDateOnly <= pickupDateOnly) {
                                            Swal.fire({
                                                icon: 'error',
                                                title: 'Lỗi',
                                                text: 'Ngày trả xe phải lớn hơn ngày nhận xe!',
                                                confirmButtonText: 'Đóng',
                                                willClose: () => {
                                                    // Xóa giá trị ngày trả nếu có lỗi
                                                    $('#returnDate').val('');
                                                }
                                            });
                                        }
                                    });
                                });
                            </script>
                        </div>
                        @if(Model.IsActive == false) {
                       
                        <div class="row">
                                <p class="desc-content" style="color:red"><i class="bi bi-exclamation-triangle-fill"></i>Xe đang bận</p>
                        </div>
                        }
                     

                        <!-- Hàng chứa nút Add to cart và Add to wishlist -->
                        <div class="row">
                            <div class="col-md-6">
                                @{
                                    var buttonClass = (bool)Model.IsActive
                                    ? "ajax-add-to-cart btn product-cart button-icon flosun-button dark-btn w-100"
                                    : "ajax-add-to-cart btn product-cart button-icon flosun-button dark-btn w-100 disabled";
                                }
                                <button   type="submit" asp-action="AddToCart" asp-controller="Cart" asp-route-id="@Model.CarId" type="submit" class="@buttonClass" >
                                    Chọn thuê
                                </button>
                                
                            </div>
                            <div class="col-md-6">
                                <a class="btn flosun-button secondary-btn secondary-border rounded-0 w-100" href="wishlist.html">
                                    Yêu thích
                                </a>
                            </div>
                        </div>
                     
                    </form>
                  

                    <div class="social-share mb-4 mt-3">
                        <span>Share :</span>
                        <a href="#"><i class="fa fa-facebook-square facebook-color"></i></a>
                        <a href="#"><i class="fa fa-twitter-square twitter-color"></i></a>
                        <a href="#"><i class="fa fa-linkedin-square linkedin-color"></i></a>
                        <a href="#"><i class="fa fa-pinterest-square pinterest-color"></i></a>
                    </div>
                    <div class="payment">
                        <a href="#"><img class="border" src="assets/images/payment/payment-icon.png" alt="Payment"></a>
                    </div>
                </div>
            </div>
        </div>
        <div class="row mt-no-text">
            <div class="col-lg-12 col-custom">
                <ul class="nav nav-tabs" id="myTab" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link active text-uppercase" id="home-tab" data-bs-toggle="tab" href="#connect-1" role="tab" aria-selected="true">Mô tả</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-uppercase" id="profile-tab" data-bs-toggle="tab" href="#connect-2" role="tab" aria-selected="false">Đánh giá</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-uppercase" id="contact-tab" data-bs-toggle="tab" href="#connect-3" role="tab" aria-selected="false">Các tiện ích</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-uppercase" id="review-tab" data-bs-toggle="tab" href="#connect-4" role="tab" aria-selected="false">Đặc điểm</a>
                    </li>
                </ul>
                <div class="tab-content mb-text" id="myTabContent">
                    <div class="tab-pane fade show active" id="connect-1" role="tabpanel" aria-labelledby="home-tab">
                        <div class="desc-content">
                            <p class="mb-3">@Html.Raw(Model.Details)</p>
                            @* <p>Et harum quidem rerum facilis est et expedita distinctio. Nam libero tempore, cum soluta nobis est eligendi optio cumque nihil impedit quo minus id quod maxime placeat facere possimus, omnis voluptas assumenda est, omnis dolor repellendus. Temporibus autem quibusdam et aut officiis debitis aut rerum necessitatibus saepe eveniet ut et voluptates repudiandae sint et molestiae non recusandae. Itaque earum rerum hic tenetur a sapiente delectus, ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat.</p> *@
                        </div>
                    </div>
                    <div class="tab-pane fade" id="connect-2" role="tabpanel" aria-labelledby="profile-tab">
                        <!-- Start Single Content -->
                        <div class="product_tab_content  border p-3">
                            <div class="review_address_inner">
                                <!-- Start Single Review -->
                                @foreach (var item in productReviews)
                                {

                                    <div class="pro_review mb-5">
                                        <div class="review_thumb">
                                            <img alt="review images" src="assets/images/review/1.jpg">
                                        </div>
                                        <div class="review_details">
                                            <div class="review_info mb-2">
                                                <div class="product-rating mb-2">
                                                    @for (int i = 0; i < 5; i++)
                                                    {
                                                        if (i < item.Star)
                                                        {
                                                            <i class="fa fa-star"></i>
                                                        }
                                                        else
                                                        {
                                                            <i class="fa fa-star-o"></i>
                                                        }
                                                    }

                                                </div>
                                                <h5 style="color:black">@item.Name - <span> @item.CreatedDate.Value.ToString("dd/MM/yyyy")</span></h5>
                                            </div>
                                            <p>@item.Detail</p>
                                        </div>
                                    </div>
                                }

                                <!-- End Single Review -->
                            </div>
                            <!-- Start RAting Area -->
                            <div class="rating_wrap">
                                <h5 class="rating-title-1 font-weight-bold mb-2">Add a review </h5>
                                <p class="mb-2">Your email address will not be published. Required fields are marked *</p>
                                <h6 class="rating-title-2 mb-2">Your Rating</h6>
                                <div class="rating_list mb-4">
                                    <div class="review_info">
                                        <div class="ajax-rating product-rating mb-3 ">
                                            <!-- Thêm data-value cho từng sao -->
                                            <i class="fa fa-star " data-value="1"></i>
                                            <i class="fa fa-star " data-value="2"></i>
                                            <i class="fa fa-star" data-value="3"></i>
                                            <i class="fa fa-star-o " data-value="4"></i>
                                            <i class="fa fa-star-o " data-value="5"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- End RAting Area -->
                            <div class="comments-area comments-reply-area">
                                <div class="row">
                                    <div class="col-lg-12 col-custom">
                                        <div action="#" class="comment-form-area">
                                            <div class="row comment-input">
                                                <div class="col-md-6 col-custom comment-form-author mb-3">
                                                    <label>Name <span class="required">*</span></label>
                                                    <input type="text" id="r_name" required="required" name="Name">
                                                </div>
                                                <div class="col-md-6 col-custom comment-form-emai mb-3">
                                                    <label>Email <span class="required">*</span></label>
                                                    <input type="text" id="r_email" required="required" name="email">
                                                </div>
                                            </div>
                                            <div class="comment-form-comment mb-3">
                                                <label>Comment</label>
                                                <textarea class="comment-notes" id="r_comment" required="required"></textarea>
                                            </div>
                                            <div class="comment-form-submit">
                                                <button type="button" id="r_submit" class="btn flosun-button secondary-btn rounded-0" data-id="@Model.CarId">Submit</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- End Single Content -->
                    </div>
                    <div class="tab-pane fade" id="connect-3" role="tabpanel" aria-labelledby="contact-tab">
                        <div class="shipping-policy">
                            <h4 class="title-3 mb-4">Shipping policy for our store</h4>
                            <p class="desc-content mb-2">Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate</p>
                            <ul class="policy-list mb-2">
                                <li>1-2 business days (Typically by end of day)</li>
                                <li><a href="#">30 days money back guaranty</a></li>
                                <li>24/7 live support</li>
                                <li>odio dignissim qui blandit praesent</li>
                                <li>luptatum zzril delenit augue duis dolore</li>
                                <li>te feugait nulla facilisi.</li>
                            </ul>
                            <p class="desc-content mb-2">Nam liber tempor cum soluta nobis eleifend option congue nihil imperdiet doming id quod mazim placerat facer possim assum. Typi non habent claritatem insitam; est usus legentis in iis qui facit eorum</p>
                            <p class="desc-content mb-2">claritatem. Investigationes demonstraverunt lectores legere me lius quod ii legunt saepius. Claritas est etiam processus dynamicus, qui sequitur mutationem consuetudium lectorum. Mirum est notare quam littera gothica, quam nunc putamus parum claram, anteposuerit litterarum formas humanitatis per</p>
                            <p class="desc-content mb-2">seacula quarta decima et quinta decima. Eodem modo typi, qui nunc nobis videntur parum clari, fiant sollemnes in futurum.</p>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="connect-4" role="tabpanel" aria-labelledby="review-tab">
                        <div class="size-tab table-responsive-lg">
                            <h4 class="title-3 mb-4">Đăc điểm</h4>
                            <table class="table border">
                                <thead>
                                    <tr>
                                        <th> <i class="bi bi-sliders2-vertical" style="margin-right:10px"></i>Truyền động</th>
                                        <th><i class="bi bi-person-wheelchair" style="margin-right:10px"></i>Số ghế</th>
                                        <th><i class="bi bi-fuel-pump-fill" style="margin-right:10px"></i>Nhiên Liệu</th>
                                        <th><i class="bi bi-fire" style="margin-right:10px"></i>Tiêu hao</th>
                                    </tr>
                          
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Số tự dộng</td>
                                        <td>7 chỗ</td>
                                        <td>Xăng</td>
                                        <td>Số tự dộng</td>
                                    </tr>
                                    
                                   
                               
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Single Product Main Area End -->
<!--Product Area Start-->
<div class="product-area mt-text-3">
    <div class="container custom-area-2 overflow-hidden">
        <div class="row">
            <!--Section Title Start-->
            <div class="col-12 col-custom">
                <div class="section-title text-center mb-30">
                    <span class="section-title-1">The Most Trendy</span>
                    <h3 class="section-title-3">Related Products</h3>
                </div>
            </div>
            <!--Section Title End-->
        </div>
        <div class="row product-row">
            <div class="col-12 col-custom">
                <div class="product-slider swiper-container anime-element-multi">
                    <div class="swiper-wrapper">
                        @foreach (var item in productRelated)
                        {
                            string Rurl = $"/product/{item.Alias}-{item.CarId}.html";
                            <div class="single-item swiper-slide">
                                <!--Single Product Start-->
                                <div class="single-product position-relative mb-30">
                                    <div class="product-image">
                                        <a class="d-block" href="@Rurl">
                                            <img src="@item.Image" alt="" class="product-image-1 w-100">
                                            <img src="@item.Image" alt="" class="product-image-2 position-absolute w-100">
                                        </a>
                                        <span class="onsale">Sale!</span>
                                        <div class="add-action d-flex flex-column position-absolute">
                                            <a href="compare.html" title="Compare">
                                                <i class="lnr lnr-sync" data-toggle="tooltip" data-placement="left" title="Compare"></i>
                                            </a>
                                            <a href="wishlist.html" title="Add To Wishlist">
                                                <i class="lnr lnr-heart" data-toggle="tooltip" data-placement="left" title="Wishlist"></i>
                                            </a>
                                            <a href="#exampleModalCenter" title="Quick View" data-bs-toggle="modal" data-bs-target="#exampleModalCenter">
                                                <i class="lnr lnr-eye" data-toggle="tooltip" data-placement="left" title="Quick View"></i>
                                            </a>
                                        </div>
                                    </div>
                                    <div class="product-content">
                                        <div class="product-title">
                                            <h4 class="title-2"> <a href="product-details.html">@item.CarName</a></h4>
                                        </div>
                                        <div class="product-rating">
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star-o"></i>
                                            <i class="fa fa-star-o"></i>
                                        </div>
                                        <div class="price-box">
                                            <span class="regular-price ">$@item.SalePrice</span>
                                            <span class="old-price"><del>$@item.Price</del></span>
                                        </div>
                                        <a href="cart.html" class="btn product-cart">Add to Cart</a>
                                    </div>
                                </div>
                                <!--Single Product End-->
                                <div class="modal flosun-modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-hidden="true">
                                    <div class="modal-dialog modal-dialog-centered" role="document">
                                        <div class="modal-content">
                                            <button type="button" class="close close-button" data-bs-dismiss="modal" aria-label="Close">
                                                <span class="close-icon" aria-hidden="true">x</span>
                                            </button>
                                            <div class="modal-body">
                                                <div class="container-fluid custom-area">
                                                    <div class="row">
                                                        <div class="col-md-6 col-custom">
                                                            <div class="modal-product-img">
                                                                <a class="w-100" href="#">
                                                                    <img class="w-100" src="~/assets/images/product/large-size/1.jpg" alt="Product">
                                                                </a>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6 col-custom">
                                                            <div class="modal-product">
                                                                <div class="product-content">
                                                                    <div class="product-title">
                                                                        <h4 class="title">Product dummy name</h4>
                                                                    </div>
                                                                    <div class="price-box">
                                                                        <span class="regular-price ">$80.00</span>
                                                                        <span class="old-price"><del>$90.00</del></span>
                                                                    </div>
                                                                    <div class="product-rating">
                                                                        <i class="fa fa-star"></i>
                                                                        <i class="fa fa-star"></i>
                                                                        <i class="fa fa-star"></i>
                                                                        <i class="fa fa-star-o"></i>
                                                                        <i class="fa fa-star-o"></i>
                                                                        <span>1 Review</span>
                                                                    </div>
                                                                    <p class="desc-content">we denounce with righteous indignation and dislike men who are so beguiled and demoralized by the charms of pleasure of the moment, so blinded by desire, that they cannot foresee the pain and trouble that are bound to ensue; and equal blame bel...</p>
                                                                    <form class="d-flex flex-column w-100" action="#">
                                                                        <div class="form-group">
                                                                            <select class="form-control nice-select w-100">
                                                                                <option>S</option>
                                                                                <option>M</option>
                                                                                <option>L</option>
                                                                                <option>XL</option>
                                                                                <option>XXL</option>
                                                                            </select>
                                                                        </div>
                                                                    </form>
                                                                    <div class="quantity-with-btn">
                                                                        <div class="quantity">
                                                                            <div class="cart-plus-minus">
                                                                                <input class="cart-plus-minus-box" value="0" type="text">
                                                                                <div class="dec qtybutton">-</div>
                                                                                <div class="inc qtybutton">+</div>
                                                                                <div class="dec qtybutton"><i class="fa fa-minus"></i></div>
                                                                                <div class="inc qtybutton"><i class="fa fa-plus"></i></div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="add-to_btn">
                                                                            <a class="btn product-cart button-icon flosun-button dark-btn" href="cart.html">Add to cart</a>
                                                                            <a class="btn flosun-button secondary-btn rounded-0" href="wishlist.html">Add to wishlist</a>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        }

                    </div>
                    <!-- Slider pagination -->
                    <div class="swiper-pagination default-pagination"></div>
                </div>
            </div>
        </div>
    </div>
</div>
<!--Product Area End-->
@section scripts {
  
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        document.addEventListener('click', function (event) {
            if (event.target.matches('.disabled')) {
                event.preventDefault();
                Swal.fire({
                    icon: 'warning',
                    title: 'Thông báo',
                    text: 'Xe này hiện không khả dụng!',
                });
            }
        });
    </script>
    <script>
         
            
        //
        $(document).ready(function () {
           

            let selectedRating = 0; // Lưu số sao được chọn

            $(".ajax-rating i").on("click", function () {
                selectedRating = $(this).data("value"); // Lấy giá trị sao

                // Đổi trạng thái các sao
                $(".ajax-rating i").each(function () {
                    if ($(this).data("value") <= selectedRating) {
                        $(this).removeClass("fa-star-o").addClass("fa-star");
                    } else {
                        $(this).removeClass("fa-star").addClass("fa-star-o");
                    }
                });

                console.log("Selected Rating: ", selectedRating); // Log ra số sao được chọn
            });
            $("#r_submit").click(function() {
                const reviewData = {
                    name: $("#r_name").val(),
                    email: $("#r_email").val(),
                    detail: $("#r_comment").val(),
                    id: $(this).data("id"),
                    star: selectedRating
                };
                $.ajax({
                    url : "/Product/Reviews",
                    type : "POST",
                    data : reviewData,
                    success: function(data) {
                            console.log(data);
                            Swal.fire({
                            position: "top-end",
                            icon: "success",
                            title: "Your work has been saved",
                            showConfirmButton: false,
                            timer: 1500
                            });
                            // Thêm bình luận mới vào danh sách hiện tại
                            appendNewReview(reviewData);
                            // Xóa nội dung các ô input sau khi gửi
                            $("#r_name").val("");
                            $("#r_email").val("");
                            $("#r_comment").val("");
                            $(".ajax-rating i").removeClass("fa-star").addClass("fa-star-o");
                            selectedRating = 0; // Reset rating
                        },
                    error: function() {
                            Swal.fire({
                                icon: "error",
                                title: "Oops...",
                                text: "Something went wrong!",
                                footer: '<a href="#">Why do I have this issue?</a>'
                            });
                    }
                });
            });


                 // Hàm thêm bình luận mới vào danh sách
        function appendNewReview(review) {
            const newReviewHtml = `
                <div class="pro_review mb-5">
                    <div class="review_thumb">
                        <img alt="review images" src="assets/images/review/default-avatar.jpg">
                    </div>
                    <div class="review_details">
                        <div class="review_info mb-2">
                            <div class="product-rating mb-2">
                                ${generateStarsHtml(review.star)}
                            </div>
                            <h5>${review.name} - <span>${new Date().toLocaleDateString()}</span></h5>
                        </div>
                        <p>${review.detail}</p>
                    </div>
                </div>
            `;

            // Thêm bình luận mới vào danh sách
            $(".review_address_inner").prepend(newReviewHtml); // Thêm vào đầu danh sách
        }

        // Hàm tạo HTML cho sao
        function generateStarsHtml(starCount) {
            let starsHtml = "";
            for (let i = 1; i <= 5; i++) {
                if (i <= starCount) {
                    starsHtml += '<i class="fa fa-star"></i>';
                } else {
                    starsHtml += '<i class="fa fa-star-o"></i>';
                }
            }
            return starsHtml;
        }
        });

         
    </script>
}